<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Test timer resolution</title>
	<script src="test.js" defer></script>
	<style>
		table,
		th,
		td {
			border: thin solid;
			border-collapse: collapse;
			padding: 10px;
		}

		aside {
			margin: 10px;
		}
	</style>
</head>

<body>
	<header>
		<h1>Test timer resolution</h1>
		<p>This test can only test the resolution of timers, not their accuracy.
			<br> A test run generates 25 million (25165824) timestamps
			<br> Checks for monotony and if the clock skips ahead</p>
	</header>
	<main>
		<p>
			<button id="startTest" type="button" autofocus>Start test</button>
		</p>
		<table>
			<thead>
				<tr>
					<th></th>
					<th>performance.now()</th>
					<th>Date.now()</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>Elapsed time of
						<br>one test run</td>
					<td id="perfTotal"></td>
					<td id="dateTotal"></td>
				</tr>
				<tr>
					<td>Unique values</td>
					<td id="perfUnique"></td>
					<td id="dateUnique"></td>
				</tr>
				<tr>
					<td>% of total</td>
					<td id="perfPerc"></td>
					<td id="datePerc"></td>
				</tr>
				<tr>
					<td>Avg diff (ms)</td>
					<td id="perfAvg"></td>
					<td id="dateAvg"></td>
				</tr>
				<tr>
					<td>Max diff (ms)</td>
					<td id="perfMax"></td>
					<td id="dateMax"></td>
				</tr>
				<tr>
					<td>Min diff (ms)</td>
					<td id="perfMin"></td>
					<td id="dateMin"></td>
				</tr>
				<tr>
					<td>Max jitter (ms)</td>
					<td id="perfMaxJitter"></td>
					<td id="dateMaxJitter"></td>
				</tr>
				<tr>
					<td>Min jitter (ms)</td>
					<td id="perfMinJitter"></td>
					<td id="dateMinJitter"></td>
				</tr>
				<tr>
					<td>Diff std deviation (ms)</td>
					<td id="perfStdDev"></td>
					<td id="dateStdDev"></td>
				</tr>
			</tbody>
		</table>
		<aside>
			Unique values: number of distinct timestamps
			<br> % of total is the ratio of the number of distinct timestamps to all generated timestamps
			<br> Diff is the difference between two adjacent distinct timestamps
			<br> diff = (timestamp_n+1 - timestamp_n)
			<br> Here, "Jitter" is difference between the diffs of three adjacent distinct timestamps
			<br> jitter = (timestamp_n+2 - timestamp_n+1) - (timestamp_n+1 - timestamp_n)
		</aside>
	</main>
</body>

</html>